---
layout: post
title: Flask ve SQLAlchemy ile Kayıt-Giriş Uygulaması
subtitle: Python Microframewor'u olan Flask ile register-login uygulaması
gh-repo: ilteriskesk/ilteriskesk.github.io
gh-badge: [star, fork, follow]
tags: [jekyll, git, github, flask, sqlalchemy]

---

### Flask ve SQLAlchemy Kullanarak Basit Bir Kullanıcı Kayıt ve Giriş Sayfası Oluşturma

Herkese merhaba. [Flask](http://flask.pocoo.org/) bildiğiniz gibi python ile yazılmış bir microframework (mikro çatı).
Oluşturacağım küçük web projelerini flask ile yapmayı tercih ediyorum. Ancak daha karmaşık projeleri
küçük küçük kütüphaneler kurarak kolayca yapmanız mümkün.

Bu yazıda **Flask** ve **SQLAlchemy** kullanılarak basit bir kayıt-giriş olma sistemi yapacağız. Hazırsak hadi
gelin başlayalım.

**Not:**
[Önceki](/2018-08-21-flaskkayit.md) yazımda basit bir kayıt uygulaması yapmıştık ancak bu yazım hem giriş hem kayıt 
uygulaması olacak.

---------------------------------------

İlk olarak bir app.py isimli bir dosya açalım. İçine şu kodları ekleyelim.

**app.py**

```Python
from flask import Flask, render_template, flash, redirect, request, session, logging, url_for
from flask_sqlalchemy import SQLAlchemy
from forms import LoginForm, RegisterForm
from werkzeug.security import generate_password_hash, check_password_hash

app = Flask(__name__)
app.config['SECRET_KEY'] = 'linuxdegilgnulinux'
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////home/ilteriskeskin/Belgeler/Flask/data.db'
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name= db.Column(db.String(15), unique=True)
    username = db.Column(db.String(15), unique=True)
    email = db.Column(db.String(50), unique=True)
    password = db.Column(db.String(25), unique=True)

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/login/', methods = ['GET', 'POST'])
def login():
    form = LoginForm(request.form)
    if request.method == 'POST' and form.validate:
        user = User.query.filter_by(email = form.email.data).first()
        if user:
            if check_password_hash(user.password, form.password.data):
                flash("Başarıyla Giriş Yaptınız", "success")
                
                session['logged_in'] = True
                session['email'] = user.email 

                return redirect(url_for('home'))
            else:
                flash("Kullanıcı Adı veya Parola Yanlış", "danger")
                return redirect(url_for('login'))

    return render_template('login.html', form = form)


@app.route('/register/', methods = ['GET', 'POST'])
def register():
    form = RegisterForm(request.form)
    if request.method == 'POST' and form.validate():
        hashed_password = generate_password_hash(form.password.data, method='sha256')
        new_user = User(name = form.name.data, username = form.username.data, email = form.email.data, password = hashed_password)
        db.session.add(new_user)
        db.session.commit()
        flash('Başarılı bir şekilde kayıt oldunuz', 'success')
        return redirect(url_for('login'))
    else:
        return render_template('register.html', form = form)


if __name__ == '__main__':
    db.create_all()
    app.run(debug=True)
```

Daha sonra forms.py adında başka bir dosya açalım ve içine şu kodları ekleyelim.

**forms.py**

```Python
from wtforms import Form, BooleanField, StringField, PasswordField, validators, TextAreaField, IntegerField
from wtforms.validators import DataRequired

class LoginForm(Form):
    email = StringField("Email", validators=[validators.Length(min=7, max=50), validators.DataRequired(message="Lütfen Bu Alanı Doldurun")])
    password = PasswordField("Parola", validators=[validators.DataRequired(message="Lütfen Bu Alanı Doldurun")])

# Kullanıcı kayıt formu

class RegisterForm(Form):
    name = StringField("Ad", validators=[validators.Length(min=3, max=25), validators.DataRequired(message="Lütfen Bu Alanı Doldurun")])
    username = StringField("Kullanıcı Adı", validators=[validators.Length(min=3, max=25), validators.DataRequired(message="Lütfen Bu Alanı Doldurun")])
    email = StringField("Email", validators=[validators.Email(message="Lütfen Geçerli Bir Email Adresi Girin")])
    password = PasswordField("Parola", validators=[
        validators.DataRequired(message="Lütfen Bu Alanı Doldurun"),
        validators.EqualTo(fieldname="confirm", message="Parolalarınız Uyuşmuyor")
    ])
    confirm = PasswordField("Parola Doğrula", validators=[validators.DataRequired(message="Lütfen Bu Alanı Doldurun")])
```

* Proje kodlarını [GitHub](https://github.com/ilteriskesk) hesabımda paylaştım.
* Tasarım kısmı tamamiyle size kalmış ancak benim repomda kendi yaptığımı bulabilirsiniz.

Hemen görüntüleri paylaşayım.

![IMG 1]({{ "/img/home_yazi.png" | https://github.com/ilteriskesk/ilteriskesk.github.io/tree/master/img/index.png }})

![IMG 1]({{ "/img/register_yazi.png" | https://github.com/ilteriskesk/ilteriskesk.github.io/tree/master/img/kayit.png }})

![IMG 1]({{ "/img/sqlitebrowser_yazi.png" | https://github.com/ilteriskesk/ilteriskesk.github.io/tree/master/img/giris.png }})

![IMG 1]({{ "/img/db_yazi.png" | https://github.com/ilteriskesk/ilteriskesk.github.io/tree/master/img/dashboard.png }})

**Çıktılar böyle ise sorunsuz bir şekilde çalışıyor.**
